{% extends 'base.html' %}

{% block content %}
  <h2>Your Feed</h2>
  
  <!-- Buttons to create ticket and ticket + review -->
  <div class="create-buttons">
    <a href="{% url 'create_ticket' %}" class="btn btn-primary">Create Ticket</a>
    <a href="{% url 'create_ticket_and_review' %}" class="btn btn-primary">Create Review</a>
  </div>
  
  <!-- Display tickets and reviews -->
  <div class="feed-content">
    {% for item in feed %}
      <div class="feed-item">
        {% if item.review %}
          <h3>{{ item.title }}</h3>
          <p>{{ item.description }}</p>
          <p class="review-content">{{ item.review.content }}</p>
          <a href="{% url 'create_review' item.id %}" class="btn btn-primary">Add Review</a>
          <a href="{% url 'edit_ticket' item.id %}" class="btn btn-secondary">Edit Ticket</a>
          <a href="{% url 'delete_ticket' item.id %}" class="btn btn-danger">Delete Ticket</a>
          <a href="{% url 'edit_review' item.review.id %}" class="btn btn-secondary">Edit Review</a>
          <a href="{% url 'delete_review' item.review.id %}" class="btn btn-danger">Delete Review</a>
        {% else %}
          <h3>{{ item.title }}</h3>
          <p>{{ item.description }}</p>
          <a href="{% url 'create_review' item.id %}" class="btn btn-primary">Add Review</a>
          <a href="{% url 'edit_ticket' item.id %}" class="btn btn-secondary">Edit Ticket</a>
          <a href="{% url 'delete_ticket' item.id %}" class="btn btn-danger">Delete Ticket</a>
        {% endif %}
      </div>
    {% endfor %}
  </div>
{% endblock %}



